"use strict";(self.webpackChunkfairblock_docusaurus=self.webpackChunkfairblock_docusaurus||[]).push([[4723],{224:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>l});var s=n(1527),i=n(7214);const r={sidebar_position:1},c="Stylus App Quickstart",o={id:"welcome/quickstart/app_dev_quickstart/stylus_apps",title:"Stylus App Quickstart",description:"The first version, v1, of this quickstart simply has Fairblock technologies deployed using rust and Arbitrum Stylus onto the respective test network.",source:"@site/docs/welcome/quickstart/app_dev_quickstart/stylus_apps.md",sourceDirName:"welcome/quickstart/app_dev_quickstart",slug:"/welcome/quickstart/app_dev_quickstart/stylus_apps",permalink:"/docs/welcome/quickstart/app_dev_quickstart/stylus_apps",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Developer Quickstart: Build Confidentiality Apps or Chains with Fairyring",permalink:"/docs/welcome/quickstart/"},next:{title:"OP Stack Quickstart",permalink:"/docs/welcome/quickstart/app_dev_quickstart/evm_apps"}},a={},l=[{value:"Contract Description and Gas Consumption",id:"contract-description-and-gas-consumption",level:2},{value:"1. <strong>IBE Contract (Hashing)</strong>",id:"1-ibe-contract-hashing",level:3},{value:"2. <strong>IBE Contract</strong>",id:"2-ibe-contract",level:3},{value:"3. <strong>ChaCha20 MAC Contract</strong>",id:"3-chacha20-mac-contract",level:3},{value:"4. <strong>ChaCha20 Decryption Contract</strong>",id:"4-chacha20-decryption-contract",level:3},{value:"5. <strong>Decryption Interface Contract</strong>",id:"5-decryption-interface-contract",level:3},{value:"Testing",id:"testing",level:2},{value:"Overview",id:"overview",level:3},{value:"Contract Testing",id:"contract-testing",level:4},{value:"Network Configuration",id:"network-configuration",level:4},{value:"Addresses and Private Key Setup",id:"addresses-and-private-key-setup",level:4},{value:"Installation Requirements",id:"installation-requirements",level:3},{value:"1. Install Rust Nightly Toolchain",id:"1-install-rust-nightly-toolchain",level:4},{value:"2. Install Foundry and Cast",id:"2-install-foundry-and-cast",level:4},{value:"3. Install Stylus",id:"3-install-stylus",level:4},{value:"4. Private Key Setup",id:"4-private-key-setup",level:4},{value:"Running Tests",id:"running-tests",level:3}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"stylus-app-quickstart",children:"Stylus App Quickstart"}),"\n",(0,s.jsx)(t.p,{children:"The first version, v1, of this quickstart simply has Fairblock technologies deployed using rust and Arbitrum Stylus onto the respective test network."}),"\n",(0,s.jsx)(t.p,{children:"The intent of this tutorial is to have:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Deployed fairblock technologies via several rust contracts using Arbitrum Stylus into the respective Arbitrum test network."}),"\n",(0,s.jsxs)(t.li,{children:["Provide a solidity smart contract sealed bid auction example that interacts with the main Fairblock ",(0,s.jsx)(t.code,{children:"Decrypter"})," contract that provides Fairblock decryption methodologies."]}),"\n",(0,s.jsxs)(t.li,{children:["Run simple tests showcasing the new smart contract carrying out conditional decryption and execution using the ",(0,s.jsx)(t.code,{children:"Decrypter"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["The repo for this tutorial can be found ",(0,s.jsx)(t.a,{href:"https://github.com/Fairblock/ArbitrumContracts",children:"here"}),". For convenience, steps to set up and walk through the tutorial are listed below as well."]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h1,{id:"decryption-contracts",children:"Decryption Contracts"}),"\n",(0,s.jsx)(t.p,{children:"Run the following command to clone the appropriate repo:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"git clone https://github.com/Fairblock/ArbitrumContracts.git\ncd ArbitrumContracts\n"})}),"\n",(0,s.jsx)(t.p,{children:"This repository includes the contracts implemented to perform the IBE decryption process on Arbitrum chain."}),"\n",(0,s.jsx)(t.h2,{id:"contract-description-and-gas-consumption",children:"Contract Description and Gas Consumption"}),"\n",(0,s.jsx)(t.p,{children:"The decryption process involves 5 contracts. Below is a breakdown of each contract and their respective gas consumption:"}),"\n",(0,s.jsxs)(t.h3,{id:"1-ibe-contract-hashing",children:["1. ",(0,s.jsx)(t.strong,{children:"IBE Contract (Hashing)"})]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Functionality:"})," Verifies the correctness of the ciphertext based on the Boneh-Franklin Identity-Based Encryption (BF-IBE) algorithm. It calculates a hash over the message and sigma, multiplies it by ",(0,s.jsx)(t.code,{children:"P"}),", and verifies that the result matches the ",(0,s.jsx)(t.code,{children:"U"})," component in the ciphertext."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Gas Consumption:"})," ~1,587,000","\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Key Contributor:"})," Scalar and G1 point multiplication, consuming 1,366,619 gas."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.h3,{id:"2-ibe-contract",children:["2. ",(0,s.jsx)(t.strong,{children:"IBE Contract"})]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Functionality:"})," Decrypts the ciphertext and recovers the message (which is the symmetric key for the second layer of encryption). It leverages the IBE Contract (Hashing) for ciphertext validation."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Gas Consumption:"})," ~1,742,000(~1,587,000 of this comes from the IBE Contract (Hashing))","\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Note:"})," The majority of the gas consumption comes from the hashing contract."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.h3,{id:"3-chacha20-mac-contract",children:["3. ",(0,s.jsx)(t.strong,{children:"ChaCha20 MAC Contract"})]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Functionality:"})," Computes the MAC for the ciphertext header using the key and ciphertext body."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Gas Consumption:"})," ~72,000","\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Note:"})," Minimal gas usage."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.h3,{id:"4-chacha20-decryption-contract",children:["4. ",(0,s.jsx)(t.strong,{children:"ChaCha20 Decryption Contract"})]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Functionality:"})," Performs symmetric key decryption using the provided key and returns the plaintext."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Gas Consumption:"})," ~55,000","\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Note:"})," Minimal gas usage."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.h3,{id:"5-decryption-interface-contract",children:["5. ",(0,s.jsx)(t.strong,{children:"Decryption Interface Contract"})]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Functionality:"})," Serves as the main interface for the decryption process. It accepts the decryption key and ciphertext, invoking the appropriate contracts to perform the full decryption."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Gas Consumption:"})," ~9,189,000","\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Breakdown:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"IBE, MAC, and ChaCha20 contracts: As described above."}),"\n",(0,s.jsx)(t.li,{children:"~1,565,000: Deserializing the decryption key."}),"\n",(0,s.jsx)(t.li,{children:"~5,445,000: Pairing operation."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"testing",children:"Testing"}),"\n",(0,s.jsx)(t.p,{children:"This project contains multiple contracts, each with its own test scripts and examples for deployment and interaction on the blockchain. These tests demonstrate how the contracts can be used both independently and from within another contract (e.g., an application contract)."}),"\n",(0,s.jsx)(t.h3,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(t.h4,{id:"contract-testing",children:"Contract Testing"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Rust Contract"}),": Implements a basic auction application where bids are encrypted and decrypted using decrypter contracts once the decryption key is provided. For simplicity, some checks have been removed. This example is only to demonstrate how to use the decryption contracts and is not suitable for production use."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Solidity Contract"}),": Implements a contract that allows the submission of encrypted messages and decrypts them once a key is submitted."]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["Both contracts can be tested using their respective ",(0,s.jsx)(t.code,{children:"test.sh"})," files in their corresponding folders."]}),"\n",(0,s.jsx)(t.h4,{id:"network-configuration",children:"Network Configuration"}),"\n",(0,s.jsxs)(t.p,{children:["By default, all contracts will be deployed on the Arbitrum testnet. However, the RPC URL can be modified in the ",(0,s.jsx)(t.code,{children:"test.sh"})," scripts if you wish to use another network."]}),"\n",(0,s.jsx)(t.h4,{id:"addresses-and-private-key-setup",children:"Addresses and Private Key Setup"}),"\n",(0,s.jsxs)(t.p,{children:["Addresses for the deployed contracts are hardcoded in the decrypter contract and ibe contract. You can modify these addresses by replacing them with newly deployed contract addresses if necessary. Ensure that you have a private key (",(0,s.jsx)(t.code,{children:"sk"}),") set to an account on the Arbitrum testnet (if testing on the testnet) that has enough funds to cover gas fees for deploying and interacting with the contracts."]}),"\n",(0,s.jsx)(t.h3,{id:"installation-requirements",children:"Installation Requirements"}),"\n",(0,s.jsx)(t.p,{children:"Before running the tests, ensure that the following dependencies and tools are installed:"}),"\n",(0,s.jsx)(t.h4,{id:"1-install-rust-nightly-toolchain",children:"1. Install Rust Nightly Toolchain"}),"\n",(0,s.jsx)(t.p,{children:"The test scripts use a specific nightly version of Rust. Install and configure Rust by running:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\nrustup install nightly-2024-05-20\nrustup override set nightly-2024-05-20\n"})}),"\n",(0,s.jsx)(t.p,{children:"You also need to install the following target:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"rustup target add wasm32-unknown-unknown\n"})}),"\n",(0,s.jsx)(t.h4,{id:"2-install-foundry-and-cast",children:"2. Install Foundry and Cast"}),"\n",(0,s.jsx)(t.p,{children:"Foundry is used for deploying Solidity contracts and interacting with the blockchain. Install Foundry and initialize it:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"curl -L https://foundry.paradigm.xyz | bash\nfoundryup\n"})}),"\n",(0,s.jsx)(t.p,{children:"Verify that both forge and cast are installed correctly:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"forge --version\ncast --version\n"})}),"\n",(0,s.jsx)(t.h4,{id:"3-install-stylus",children:"3. Install Stylus"}),"\n",(0,s.jsx)(t.p,{children:"Stylus is required for deploying Rust contracts. Install it via Cargo:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"cargo install --force cargo-stylus\n"})}),"\n",(0,s.jsx)(t.h4,{id:"4-private-key-setup",children:"4. Private Key Setup"}),"\n",(0,s.jsxs)(t.p,{children:["You will need a private key to interact with the blockchain. You can replace the ",(0,s.jsx)(t.code,{children:"<PRIVATE_KEY>"})," placeholder in the scripts."]}),"\n",(0,s.jsx)(t.h3,{id:"running-tests",children:"Running Tests"}),"\n",(0,s.jsxs)(t.p,{children:["Navigate to the contract folder, for educational purposes, we advise looking at the ",(0,s.jsx)(t.code,{children:"test-simple-auction-solidity"})," directory. It goes over a simple sealed bid auction example."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"cd test-simple-auction-solidity\n"})}),"\n",(0,s.jsx)(t.p,{children:"Run the test script:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"./test.sh\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Review the bash script, ",(0,s.jsx)(t.code,{children:"./test.sh"})," for a better understanding of how the solidity smart contract example interacts with the ",(0,s.jsx)(t.code,{children:"Decrypter"})," contract."]})]})}function h(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},7214:(e,t,n)=>{n.d(t,{Z:()=>o,a:()=>c});var s=n(959);const i={},r=s.createContext(i);function c(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);