"use strict";(self.webpackChunkfairblock_docusaurus=self.webpackChunkfairblock_docusaurus||[]).push([[7551],{3359:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>l,frontMatter:()=>a,metadata:()=>s,toc:()=>d});var i=n(1527),r=n(7214);const a={sidebar_position:5},o="Transaction Decryption and Execution",s={id:"learn/v1_details/network/decrypt_and_execute",title:"Transaction Decryption and Execution",description:"Upon reaching the target height, the transaction is decrypted using the derived private key of the particular block height",source:"@site/docs/learn/v1_details/network/decrypt_and_execute.md",sourceDirName:"learn/v1_details/network",slug:"/learn/v1_details/network/decrypt_and_execute",permalink:"/docs/learn/v1_details/network/decrypt_and_execute",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Keyshares and Aggregation",permalink:"/docs/learn/v1_details/network/keyshares_and_aggregation"},next:{title:"Start Building",permalink:"/docs/build/start_building"}},c={},d=[];function h(e){const t={a:"a",code:"code",h1:"h1",img:"img",li:"li",p:"p",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"transaction-decryption-and-execution",children:"Transaction Decryption and Execution"}),"\n",(0,i.jsx)(t.p,{children:"Upon reaching the target height, the transaction is decrypted using the derived private key of the particular block height\nand executed before any of the mempool transactions for that block can be processed."}),"\n",(0,i.jsxs)(t.p,{children:["The derived private key for target block heights is sent to the destination chain via ",(0,i.jsx)(t.a,{href:"/docs/advanced/fairyport",children:(0,i.jsx)(t.code,{children:"fairyport"})}),",\na messaging bridge developed by the Fairblock team that reads the state of the destination chain and ",(0,i.jsx)(t.code,{children:"fairyring"})," to communicate to\n",(0,i.jsx)(t.code,{children:"fairyring"})," when conditions for decryption are met on the destination chain.\nWhen ",(0,i.jsx)(t.code,{children:"fairyring"})," is notified that the decryption conditions have been met,\nthe validators compute their derived private key shares and submit them to ",(0,i.jsx)(t.code,{children:"fairyring"})," for key share aggregation.\nWhen the threshold is met, ",(0,i.jsx)(t.code,{children:"fairyring"})," constructs the derived private key, emits a state change with the derived private key in the state,\nand then ",(0,i.jsx)(t.code,{children:"fairyport"})," sends the private key to the destination chain after observing the FairyRing state change."]}),"\n",(0,i.jsx)(t.p,{children:"Once the destination chain has access to the derived private key, it decrypts the encrypted transaction in the mempool and executes it."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Begin Block Logic",src:n(5033).Z+"",width:"2490",height:"296"})}),"\n",(0,i.jsx)(t.p,{children:"Note the following two things:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["encrypted transactions are stored in the ",(0,i.jsx)(t.a,{href:"../advanced/pep_module.md",children:(0,i.jsx)(t.code,{children:"x/pep"})})," of their corresponding chains. They are not transferred over IBC to ",(0,i.jsx)(t.code,{children:"fairyring"}),"."]}),"\n",(0,i.jsxs)(t.li,{children:["encrypted transactions are executed in their corresponding chains (not ",(0,i.jsx)(t.code,{children:"fairyring"}),")."]}),"\n",(0,i.jsxs)(t.li,{children:["the target height for executing an encrypted transaction corresponds to the height on ",(0,i.jsx)(t.code,{children:"fairyring"}),". Decryption triggered by another chain's conditions is live for private governance, while alternative conditions for decryption on destination chains will soon be implemented."]}),"\n",(0,i.jsxs)(t.li,{children:["interactions between ",(0,i.jsx)(t.code,{children:"fairyring"})," and Cosmos chains will work differently than non-Cosmos chains. We will share information regarding non-Cosmos chains soon."]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["Here is a diagram to show how this process works from end to end:\n",(0,i.jsx)(t.img,{src:n(599).Z+"",width:"5272",height:"2560"})]})]})}function l(e={}){const{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},5033:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/BeginBlockLogic-d11f56573e79063982f35ac766c0a7fb.png"},599:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/cosmos_architecture-67fb3256597a774426ea433ea56a3d62.png"},7214:(e,t,n)=>{n.d(t,{Z:()=>s,a:()=>o});var i=n(959);const r={},a=i.createContext(r);function o(e){const t=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(a.Provider,{value:t},e.children)}}}]);