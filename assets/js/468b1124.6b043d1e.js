"use strict";(self.webpackChunkfairblock_docusaurus=self.webpackChunkfairblock_docusaurus||[]).push([[8945],{9144:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>i,contentTitle:()=>t,default:()=>x,frontMatter:()=>c,metadata:()=>l,toc:()=>a});var d=r(1527),s=r(7214);const c={sidebar_position:1},t="x/pep",l={id:"advanced/pep_module",title:"pep_module",description:"Abstract",source:"@site/docs/advanced/pep_module.md",sourceDirName:"advanced",slug:"/advanced/pep_module",permalink:"/docs/advanced/pep_module",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"x/keyshare",permalink:"/docs/advanced/keyshare_module"},next:{title:"Encrypt transactions for x/pep module",permalink:"/docs/advanced/encrypt_tx"}},i={},a=[{value:"Abstract",id:"abstract",level:2},{value:"State",id:"state",level:2},{value:"Params",id:"params",level:2},{value:"Messages",id:"messages",level:2},{value:"MsgSubmitEncryptedTx",id:"msgsubmitencryptedtx",level:3},{value:"MsgCreateAggregatedKeyShare",id:"msgcreateaggregatedkeyshare",level:3},{value:"Events",id:"events",level:2},{value:"Message Events",id:"message-events",level:3},{value:"MsgSubmitEncryptedTx",id:"msgsubmitencryptedtx-1",level:4},{value:"MsgCreateAggregatedKeyShare",id:"msgcreateaggregatedkeyshare-1",level:4},{value:"Block Events",id:"block-events",level:3},{value:"Client",id:"client",level:2},{value:"CLI",id:"cli",level:3},{value:"Queries",id:"queries",level:4},{value:"latest-height",id:"latest-height",level:5},{value:"list-encrypted-tx",id:"list-encrypted-tx",level:5},{value:"list-encrypted-tx-from-block",id:"list-encrypted-tx-from-block",level:5},{value:"list-pep-nonce",id:"list-pep-nonce",level:5},{value:"params",id:"params-1",level:5},{value:"show-active-pub-key",id:"show-active-pub-key",level:5},{value:"show-encrypted-tx",id:"show-encrypted-tx",level:5},{value:"show-pep-nonce",id:"show-pep-nonce",level:5},{value:"Transactions",id:"transactions",level:4},{value:"create-aggregated-key-share",id:"create-aggregated-key-share",level:5},{value:"submit-encrypted-tx",id:"submit-encrypted-tx",level:5},{value:"gRPC",id:"grpc",level:2},{value:"EncryptedTx",id:"encryptedtx",level:3},{value:"EncryptedTxAll",id:"encryptedtxall",level:3},{value:"EncryptedTxAllFromHeight",id:"encryptedtxallfromheight",level:3},{value:"LatestHeight",id:"latestheight",level:3},{value:"PepNonce",id:"pepnonce",level:3},{value:"PepNonceAll",id:"pepnonceall",level:3},{value:"PubKey",id:"pubkey",level:3},{value:"Params",id:"params-2",level:3}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.h1,{id:"xpep",children:(0,d.jsx)(n.code,{children:"x/pep"})}),"\n",(0,d.jsx)(n.h2,{id:"abstract",children:"Abstract"}),"\n",(0,d.jsxs)(n.p,{children:["The document specifies the ",(0,d.jsx)(n.code,{children:"pep"})," module of ",(0,d.jsx)(n.code,{children:"fairyring"}),"."]}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"pep"})," module is responsible for decrypting, decoding and processing encrypted transactions from users.\nFor a guide on encrypting transactions, please read ",(0,d.jsx)(n.a,{href:"encrypt_tx",children:"this guide"}),"."]}),"\n",(0,d.jsx)(n.h2,{id:"state",children:"State"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"x/pep"})," module keeps state of the following primary objects:"]}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsx)(n.li,{children:"Aggregated keyshares"}),"\n",(0,d.jsx)(n.li,{children:"Encrypted transactions"}),"\n",(0,d.jsx)(n.li,{children:"Pep nonce"}),"\n",(0,d.jsx)(n.li,{children:"Active & queued public keys"}),"\n",(0,d.jsx)(n.li,{children:"Latest processed height"}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"params",children:"Params"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"proto/fairyring/pep/params.proto"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-proto",children:"message Params {  \n  option (gogoproto.goproto_stringer) = false;  \n  repeated TrustedCounterParty trusted_counter_parties = 1;  \n  repeated string trusted_addresses = 2;  \n  string channel_id = 3;  \n  cosmos.base.v1beta1.Coin minGasPrice = 4;  \n}  \n  \nmessage TrustedCounterParty {  \n  string client_id = 1;  \n  string connection_id = 2;  \n  string channel_id = 3;  \n}\n"})}),"\n",(0,d.jsx)(n.h2,{id:"messages",children:"Messages"}),"\n",(0,d.jsx)(n.h3,{id:"msgsubmitencryptedtx",children:"MsgSubmitEncryptedTx"}),"\n",(0,d.jsx)(n.p,{children:"Submit encrypted transaction"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"proto/fairyring/pep/tx.proto"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-proto",children:"message MsgSubmitEncryptedTx {  \n  string creator           = 1;  \n  string data              = 2;  \n  uint64 targetBlockHeight = 3;  \n}\n"})}),"\n",(0,d.jsx)(n.p,{children:"The message will fail under the following conditions:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Target block height is less than or equal to the latest height"}),"\n",(0,d.jsx)(n.li,{children:"Sender does not have enough tokens for fee"}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"msgcreateaggregatedkeyshare",children:"MsgCreateAggregatedKeyShare"}),"\n",(0,d.jsx)(n.p,{children:"Submit aggregated keyshare"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"proto/fairyring/pep/tx.proto"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-proto",children:"message MsgCreateAggregatedKeyShare {  \n  string creator = 1;  \n  uint64 height  = 2;  \n  string data    = 3;  \n}\n"})}),"\n",(0,d.jsx)(n.p,{children:"The message will fail under the following conditions:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Active public key does not exist"}),"\n",(0,d.jsx)(n.li,{children:"Aggregated keyshare is invalid"}),"\n",(0,d.jsx)(n.li,{children:"Sender is not trusted"}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"events",children:"Events"}),"\n",(0,d.jsx)(n.p,{children:"The pep module emits the following events:"}),"\n",(0,d.jsx)(n.h3,{id:"message-events",children:"Message Events"}),"\n",(0,d.jsx)(n.h4,{id:"msgsubmitencryptedtx-1",children:"MsgSubmitEncryptedTx"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Attribute Key"}),(0,d.jsx)(n.th,{children:"Attribute Value"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"new-encrypted-tx-submitted"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"creator"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"creatorAddress"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"new-encrypted-tx-submitted"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"target-height"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"height"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"new-encrypted-tx-submitted"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"index"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"txIndex"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"new-encrypted-tx-submitted"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"data"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"txData"})})]})]})]}),"\n",(0,d.jsx)(n.h4,{id:"msgcreateaggregatedkeyshare-1",children:"MsgCreateAggregatedKeyShare"}),"\n",(0,d.jsx)(n.p,{children:"The following events will be emitted when the aggregated keyshare is invalid:"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Attribute Key"}),(0,d.jsx)(n.th,{children:"Attribute Value"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"keyshare-verification"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"creator"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"creatorAddress"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"keyshare-verification"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"height"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"height"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"keyshare-verification"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"reason"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"failReason"})})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"block-events",children:"Block Events"}),"\n",(0,d.jsxs)(n.p,{children:["The following events will be emitted when processing an encrypted transaction in ",(0,d.jsx)(n.code,{children:"BeginBlock"}),":"]}),"\n",(0,d.jsx)(n.p,{children:"When the transaction is reverted:"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Attribute Key"}),(0,d.jsx)(n.th,{children:"Attribute Value"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"reverted-encrypted-tx"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"creator"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"creatorAddress"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"reverted-encrypted-tx"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"target-height"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"processedHeight"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"reverted-encrypted-tx"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"index"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"txIndex"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"reverted-encrypted-tx"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"reason"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"failReason"})})]})]})]}),"\n",(0,d.jsx)(n.p,{children:"When the transaction is executed successfully:"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Attribute Key"}),(0,d.jsx)(n.th,{children:"Attribute Value"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"executed-encrypted-tx"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"creator"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"maskedAddress"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"executed-encrypted-tx"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"target-height"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"confirmedHeight"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"executed-encrypted-tx"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"index"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"transactionIndex"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"executed-encrypted-tx"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"data"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"redactedData"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"executed-encrypted-tx"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"memo"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"underlyingTxMemo"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"executed-encrypted-tx"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"events"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"underlyingTxEvents"})})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"client",children:"Client"}),"\n",(0,d.jsx)(n.h3,{id:"cli",children:"CLI"}),"\n",(0,d.jsxs)(n.p,{children:["User can query and interact with the ",(0,d.jsx)(n.code,{children:"pep"})," module using the CLI."]}),"\n",(0,d.jsx)(n.h4,{id:"queries",children:"Queries"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"query"})," commands allows users to query ",(0,d.jsx)(n.code,{children:"pep"})," state."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyringd query pep --help"})}),"\n",(0,d.jsx)(n.h5,{id:"latest-height",children:"latest-height"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"latest-height"})," command allows users to get the latest processed height of ",(0,d.jsx)(n.code,{children:"x/pep"})," module."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyringd query pep latest-height [flags]"})}),"\n",(0,d.jsx)(n.p,{children:"Example:"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyringd query pep latest-height"})}),"\n",(0,d.jsx)(n.p,{children:"Example Output:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'height: "34"\n'})}),"\n",(0,d.jsx)(n.h5,{id:"list-encrypted-tx",children:"list-encrypted-tx"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"list-encrypted-tx"})," command allows users to get all encrypted transactions waiting to be processed."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyringd query pep list-encrypted-tx [flags]"})}),"\n",(0,d.jsx)(n.p,{children:"Example:"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyringd query pep list-encrypted-tx"})}),"\n",(0,d.jsx)(n.p,{children:"Example Output:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'encryptedTxArray:\n- encryptedTx:\n  - chargedGas:\n      amount: "300000"\n      denom: ufairy\n    creator: fairy1qnk2n4nlkpw9xfqntladh74w6ujtulwnsgww3g\n    data: 6167652d656e...2e19e18c8\n    index: "0"\n    targetHeight: "10000"\npagination:\n  next_key: null\n  total: "0"\n'})}),"\n",(0,d.jsx)(n.h5,{id:"list-encrypted-tx-from-block",children:"list-encrypted-tx-from-block"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"list-encrypted-tx-from-block"})," command allows users to get all encrypted transactions of a particular target block height."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyringd query pep list-encrypted-tx-from-block [height] [flags]"})}),"\n",(0,d.jsx)(n.p,{children:"Example:"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyringd query pep list-encrypted-tx-from-block 10000"})}),"\n",(0,d.jsx)(n.p,{children:"Example Output:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'encryptedTxArray:\n  encryptedTx:\n  - chargedGas:\n      amount: "300000"\n      denom: ufairy\n    creator: fairy1qnk2n4nlkpw9xfqntladh74w6ujtulwnsgww3g\n    data: 6167652d...9e18c8\n    index: "0"\n    targetHeight: "10000"\n'})}),"\n",(0,d.jsx)(n.h5,{id:"list-pep-nonce",children:"list-pep-nonce"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"list-pep-nonce"})," command allows users to get the pep nonce of all addresses."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyringd query pep list-pep-nonce [flags]"})}),"\n",(0,d.jsx)(n.p,{children:"Example:"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyringd query pep list-pep-nonce"})}),"\n",(0,d.jsx)(n.p,{children:"Example Output:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'pagination:\n  next_key: null\n  total: "0"\npepNonce:\n- address: fairy1qnk2n4nlkpw9xfqntladh74w6ujtulwnsgww3g\n  nonce: "3"\n'})}),"\n",(0,d.jsx)(n.h5,{id:"params-1",children:"params"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"params"})," command allows users to get the params of ",(0,d.jsx)(n.code,{children:"x/pep"})," module."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyringd query pep params [flags]"})}),"\n",(0,d.jsx)(n.p,{children:"Example:"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyringd query pep params"})}),"\n",(0,d.jsx)(n.p,{children:"Example Output:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'params:\n  channel_id: channel-0\n  minGasPrice:\n    amount: "300000"\n    denom: ufairy\n  trusted_addresses:\n  - fairy18hl5c9xn5dze2g50uaw0l2mr02ew57zkynp0td\n  - fairy1qnk2n4nlkpw9xfqntladh74w6ujtulwnsgww3g\n  trusted_counter_parties:\n  - channel_id: channel-0\n    client_id: 07-tendermint-0\n    connection_id: connection-0\n'})}),"\n",(0,d.jsx)(n.h5,{id:"show-active-pub-key",children:"show-active-pub-key"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"show-active-pub-key"})," command allows users to get the active & queued public key."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyringd query pep show-active-pub-key [flags]"})}),"\n",(0,d.jsx)(n.p,{children:"Example:"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyringd query pep show-active-pub-key"})}),"\n",(0,d.jsx)(n.p,{children:"Example Output:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'activePubKey:\n  creator: fairy18hl5c9xn5dze2g50uaw0l2mr02ew57zkynp0td\n  expiry: "10025"\n  publicKey: afbcd567c669f8bab34223102b94796542cdc1878b039bd533698cbe6d03df727eb01604003fbd990a60403aaa2ec7e5\nqueuedPubKey:\n  creator: ""\n  expiry: "0"\n  publicKey: ""\n'})}),"\n",(0,d.jsx)(n.h5,{id:"show-encrypted-tx",children:"show-encrypted-tx"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"show-encrypted-tx"})," command allows users to get the target encrypted transaction with its target block height and transaction index."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyringd query pep show-encrypted-tx [target-height] [index] [flags]"})}),"\n",(0,d.jsx)(n.p,{children:"Example:"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyringd query pep show-encrypted-tx 10000 0"})}),"\n",(0,d.jsx)(n.p,{children:"Example Output:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'encryptedTx:\n  chargedGas:\n    amount: "300000"\n    denom: ufairy\n  creator: fairy1qnk2n4nlkpw9xfqntladh74w6ujtulwnsgww3g\n  data: 616765...9e18c8\n  index: "0"\n  targetHeight: "10000"\n'})}),"\n",(0,d.jsx)(n.h5,{id:"show-pep-nonce",children:"show-pep-nonce"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"show-pep-nonce"})," command allows users to get the pep nonce of the target address."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyringd query pep show-pep-nonce [address] [flags]"})}),"\n",(0,d.jsx)(n.p,{children:"Example:"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyringd query pep show-pep-nonce fairy1qnk2n4nlkpw9xfqntladh74w6ujtulwnsgww3g"})}),"\n",(0,d.jsx)(n.p,{children:"Example Output:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'pepNonce:\n  address: fairy1qnk2n4nlkpw9xfqntladh74w6ujtulwnsgww3g\n  nonce: "3"\n'})}),"\n",(0,d.jsx)(n.h4,{id:"transactions",children:"Transactions"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"tx"})," commands allows users to interact with the ",(0,d.jsx)(n.code,{children:"pep"})," module."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyringd tx pep --help"})}),"\n",(0,d.jsx)(n.h5,{id:"create-aggregated-key-share",children:"create-aggregated-key-share"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"create-aggregated-key-share"})," command allows trusted addresses to submit aggregated keyshares to ",(0,d.jsx)(n.code,{children:"x/pep"})," module."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyringd tx pep create-aggregated-key-share [height] [data] [flags]"})}),"\n",(0,d.jsx)(n.p,{children:"Example:"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyringd tx pep create-aggregated-key-share 10000 b7b0ec8be348c564d2bda911e5f69a8aef57d37cded06c601c6562e8bf6e43bdf36fd7e16aba8eea45127b381faeb81703199edf5a0b3bd05f8046778bd6ff6b16ed2c9050e50124bf1005ab03d272754a13d580fc613f7992c2a01b21db9054"})}),"\n",(0,d.jsx)(n.h5,{id:"submit-encrypted-tx",children:"submit-encrypted-tx"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"submit-encrypted-tx"})," command allows users to submit encrypted transactions to ",(0,d.jsx)(n.code,{children:"x/pep"})," module.\nTo encrypt a transaction for ",(0,d.jsx)(n.code,{children:"x/pep"})," module, please read ",(0,d.jsx)(n.a,{href:"/docs/advanced/encrypt_tx",children:"this guide"}),"."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyringd tx pep submit-encrypted-tx [data] [target-block-height] [flags]"})}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"[data]"})," is the encrypted transaction encoded in hex."]}),"\n",(0,d.jsx)(n.p,{children:"Example:"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyringd tx pep submit-encrypted-tx 6167652d...302bc45 10000"})}),"\n",(0,d.jsx)(n.h2,{id:"grpc",children:"gRPC"}),"\n",(0,d.jsxs)(n.p,{children:["Users can query the ",(0,d.jsx)(n.code,{children:"pep"})," module using gRPC endpoints."]}),"\n",(0,d.jsx)(n.h3,{id:"encryptedtx",children:"EncryptedTx"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"EncryptedTx"})," endpoint allows users to query encrypted transaction with a particular target height and transaction index."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyring.pep.Query/EncryptedTx"})}),"\n",(0,d.jsx)(n.p,{children:"Example:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'grpcurl -plaintext \\\n -d \'{"targetHeight": 10000, "index": 0}\' \\\n localhost:9090 \\\n fairyring.pep.Query/EncryptedTx\n'})}),"\n",(0,d.jsx)(n.p,{children:"Example Output:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "encryptedTx": {\n    "targetHeight": "10000",\n    "data": "6167652...e18c8",\n    "creator": "fairy1qnk2n4nlkpw9xfqntladh74w6ujtulwnsgww3g",\n    "chargedGas": {\n      "denom": "ufairy",\n      "amount": "300000"\n    }\n  }\n}\n'})}),"\n",(0,d.jsx)(n.h3,{id:"encryptedtxall",children:"EncryptedTxAll"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"EncryptedTxAll"})," endpoint allows users to query all encrypted transactions."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyring.pep.Query/EncryptedTxAll"})}),"\n",(0,d.jsx)(n.p,{children:"Example:"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"grpcurl -plaintext localhost:9090 fairyring.pep.Query/EncryptedTxAll"})}),"\n",(0,d.jsx)(n.p,{children:"Example Output:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "encryptedTxArray": [\n    {\n      "encryptedTx": [\n        {\n          "targetHeight": "10000",\n          "data": "6167652...9e18c8",\n          "creator": "fairy1qnk2n4nlkpw9xfqntladh74w6ujtulwnsgww3g",\n          "chargedGas": {\n            "denom": "ufairy",\n            "amount": "300000"\n          }\n        }\n      ]\n    }\n  ],\n  "pagination": {\n    "total": "1"\n  }\n}\n'})}),"\n",(0,d.jsx)(n.h3,{id:"encryptedtxallfromheight",children:"EncryptedTxAllFromHeight"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"EncryptedTxAllFromHeight"})," endpoint allows users to query all encrypted transactions for a particular target block height."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyring.pep.Query/EncryptedTxAllFromHeight"})}),"\n",(0,d.jsx)(n.p,{children:"Example:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"grpcurl -plaintext \\\n -d '{\"targetHeight\": 10000}' \\\n localhost:9090 \\\n fairyring.pep.Query/EncryptedTxAllFromHeight\n"})}),"\n",(0,d.jsx)(n.p,{children:"Example Output:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "encryptedTxArray": {\n    "encryptedTx": [\n      {\n        "targetHeight": "10000",\n        "data": "6167652...9f3c2e19e18c8",\n        "creator": "fairy1qnk2n4nlkpw9xfqntladh74w6ujtulwnsgww3g",\n        "chargedGas": {\n          "denom": "ufairy",\n          "amount": "300000"\n        }\n      }\n    ]\n  }\n}\n'})}),"\n",(0,d.jsx)(n.h3,{id:"latestheight",children:"LatestHeight"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"LatestHeight"})," endpoints allows users to query the latest processed height."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyring.pep.Query/LatestHeight"})}),"\n",(0,d.jsx)(n.p,{children:"Example:"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"grpcurl -plaintext localhost:9090 fairyring.pep.Query/LatestHeight"})}),"\n",(0,d.jsx)(n.p,{children:"Example Output:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "height": "34"\n}\n'})}),"\n",(0,d.jsx)(n.h3,{id:"pepnonce",children:"PepNonce"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"PepNonce"})," endpoints allows users to query the pep nonce of a particular address."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyring.pep.Query/PepNonce"})}),"\n",(0,d.jsx)(n.p,{children:"Example:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'grpcurl -plaintext \\\n -d \'{"address": "fairy1qnk2n4nlkpw9xfqntladh74w6ujtulwnsgww3g"}\' \\\n localhost:9090 \\\n fairyring.pep.Query/PepNonce\n'})}),"\n",(0,d.jsx)(n.p,{children:"Example Output:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "pepNonce": {\n    "address": "fairy1qnk2n4nlkpw9xfqntladh74w6ujtulwnsgww3g",\n    "nonce": "3"\n  }\n}\n'})}),"\n",(0,d.jsx)(n.h3,{id:"pepnonceall",children:"PepNonceAll"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"PepNonceAll"})," endpoints allows users to query all pep nonces."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyring.pep.Query/PepNonceAll"})}),"\n",(0,d.jsx)(n.p,{children:"Example:"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"grpcurl -plaintext localhost:9090 fairyring.pep.Query/PepNonceAll"})}),"\n",(0,d.jsx)(n.p,{children:"Example Output:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "pepNonce": [\n    {\n      "address": "fairy1qnk2n4nlkpw9xfqntladh74w6ujtulwnsgww3g",\n      "nonce": "3"\n    }\n  ],\n  "pagination": {\n    "total": "1"\n  }\n}\n'})}),"\n",(0,d.jsx)(n.h3,{id:"pubkey",children:"PubKey"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"PubKey"})," endpoints allows users to query active & queued public keys."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyring.pep.Query/PubKey"})}),"\n",(0,d.jsx)(n.p,{children:"Example:"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"grpcurl -plaintext localhost:9090 fairyring.pep.Query/PubKey"})}),"\n",(0,d.jsx)(n.p,{children:"Example Output:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "activePubKey": {\n    "publicKey": "afbcd567c669f8bab34223102b94796542cdc1878b039bd533698cbe6d03df727eb01604003fbd990a60403aaa2ec7e5",\n    "creator": "fairy18hl5c9xn5dze2g50uaw0l2mr02ew57zkynp0td",\n    "expiry": "10025"\n  },\n  "queuedPubKey": {\n\n  }\n}\n'})}),"\n",(0,d.jsx)(n.h3,{id:"params-2",children:"Params"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"Params"})," endpoints allows users to query ",(0,d.jsx)(n.code,{children:"x/pep"})," module params."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"fairyring.pep.Query/Params"})}),"\n",(0,d.jsx)(n.p,{children:"Example:"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"grpcurl -plaintext localhost:9090 fairyring.pep.Query/Params"})}),"\n",(0,d.jsx)(n.p,{children:"Example Output:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "params": {\n    "trustedCounterParties": [\n      {\n        "clientId": "07-tendermint-0",\n        "connectionId": "connection-0",\n        "channelId": "channel-0"\n      }\n    ],\n    "trustedAddresses": [\n      "fairy18hl5c9xn5dze2g50uaw0l2mr02ew57zkynp0td",\n      "fairy1qnk2n4nlkpw9xfqntladh74w6ujtulwnsgww3g"\n    ],\n    "channelId": "channel-0",\n    "minGasPrice": {\n      "denom": "ufairy",\n      "amount": "300000"\n    }\n  }\n}\n'})})]})}function x(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(h,{...e})}):h(e)}},7214:(e,n,r)=>{r.d(n,{Z:()=>l,a:()=>t});var d=r(959);const s={},c=d.createContext(s);function t(e){const n=d.useContext(c);return d.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),d.createElement(c.Provider,{value:n},e.children)}}}]);