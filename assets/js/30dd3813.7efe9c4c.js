"use strict";(self.webpackChunkfairblock_docusaurus=self.webpackChunkfairblock_docusaurus||[]).push([[967],{2496:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>l,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var a=t(1527),i=t(7214);const o={sidebar_position:2},r="Private Governance",s={id:"build/appchain/private-governance",title:"Private Governance",description:"In this tutorial, you will learn how to implement private governance voting on your frontend application.",source:"@site/docs/build/appchain/private-governance.md",sourceDirName:"build/appchain",slug:"/build/appchain/private-governance",permalink:"/docs/build/appchain/private-governance",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Integrating the pep module into your own app-chain",permalink:"/docs/build/appchain/module-integration"},next:{title:"IBE",permalink:"/docs/build/appchain/ts-ibe"}},c={},p=[{value:"Installing packages",id:"installing-packages",level:2},{value:"Prepare voting data",id:"prepare-voting-data",level:2},{value:"Encrypt voting data",id:"encrypt-voting-data",level:2},{value:"Submit the encrypted voting data",id:"submit-the-encrypted-voting-data",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",img:"img",p:"p",pre:"pre",...(0,i.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"private-governance",children:"Private Governance"}),"\n",(0,a.jsx)(n.p,{children:"In this tutorial, you will learn how to implement private governance voting on your frontend application."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"voting modal",src:t(7971).Z+"",width:"882",height:"786"})}),"\n",(0,a.jsx)(n.h2,{id:"installing-packages",children:"Installing packages"}),"\n",(0,a.jsxs)(n.p,{children:["To submit an encrypted voting on your frontend application, you will need to install ",(0,a.jsx)(n.a,{href:"https://www.npmjs.com/package/ts-ibe",children:"this"})," encryption package."]}),"\n",(0,a.jsx)(n.p,{children:"Using npm:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"npm install ts-ibe\n"})}),"\n",(0,a.jsx)(n.p,{children:"Using yarn:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"yarn add ts-ibe\n"})}),"\n",(0,a.jsx)(n.p,{children:"Using pnpm:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"pnpm add ts-ibe\n"})}),"\n",(0,a.jsx)(n.h2,{id:"prepare-voting-data",children:"Prepare voting data"}),"\n",(0,a.jsxs)(n.p,{children:["From each proposal, you can get ",(0,a.jsx)(n.code,{children:"identity"})," and ",(0,a.jsx)(n.code,{children:"publicKey"}),". It takes a few blocks for the IBC response to come though. We assume that your application chain has already been integrated with our private governance module."]}),"\n",(0,a.jsxs)(n.p,{children:["And, you can get ",(0,a.jsx)(n.code,{children:"voting option"})," from the validator's input."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"const voteOption: DecryptedVoteOption = {\n  option: voteOptionFromJSON(option),\n  randomNo: getNowTimestamp(), // any random number you generated\n};\n\nconst voteOptionBytes = DecryptedVoteOption.encode(voteOption).finish();\n"})}),"\n",(0,a.jsx)(n.h2,{id:"encrypt-voting-data",children:"Encrypt voting data"}),"\n",(0,a.jsx)(n.p,{children:"To submit a private vote, you will need to encrypt the above data you prepared."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"import { timelockEncrypt } from 'ts-ibe';\n\n...\n\nconst encryptedVotingData = await timelockEncrypt(identity, publicKey, voteOptionBytes);\n\n"})}),"\n",(0,a.jsx)(n.h2,{id:"submit-the-encrypted-voting-data",children:"Submit the encrypted voting data"}),"\n",(0,a.jsx)(n.p,{children:"Finally, you can submit the encrypted voting data."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"await client.CosmosGovV1.tx.sendMsgVoteEncrypted({\n  value: {\n    proposalId,\n    voter: address,\n    encryptedData: encryptedVotingData,\n    metadata: 'Private vote',\n  },\n});\n"})})]})}function l(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},7971:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/voting-modal-65582d7bba09788d2535292a398886b6.png"},7214:(e,n,t)=>{t.d(n,{Z:()=>s,a:()=>r});var a=t(959);const i={},o=a.createContext(i);function r(e){const n=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),a.createElement(o.Provider,{value:n},e.children)}}}]);