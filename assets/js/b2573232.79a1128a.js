"use strict";(self.webpackChunkfairblock_docusaurus=self.webpackChunkfairblock_docusaurus||[]).push([[8307],{789:(e,n,p)=>{p.r(n),p.d(n,{assets:()=>s,contentTitle:()=>i,default:()=>t,frontMatter:()=>a,metadata:()=>l,toc:()=>d});var o=p(1527),r=p(7214);const a={sidebar_position:1},i="Integrating the pep module into your own app-chain",l={id:"build/appchain/module-integration",title:"Integrating the pep module into your own app-chain",description:"In this tutorial, you will learn how to integrate the pep module in your own app chain to enable encrypted transactions.",source:"@site/docs/build/appchain/module-integration.md",sourceDirName:"build/appchain",slug:"/build/appchain/module-integration",permalink:"/docs/build/appchain/module-integration",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Appchain Tutorials",permalink:"/docs/build/appchain/"},next:{title:"Private Governance",permalink:"/docs/build/appchain/private-governance"}},s={},d=[];function c(e){const n={code:"code",h1:"h1",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.h1,{id:"integrating-the-pep-module-into-your-own-app-chain",children:["Integrating the ",(0,o.jsx)(n.code,{children:"pep"})," module into your own app-chain"]}),"\n",(0,o.jsxs)(n.p,{children:["In this tutorial, you will learn how to integrate the ",(0,o.jsx)(n.code,{children:"pep"})," module in your own app chain to enable encrypted transactions.\nTo integrate, you will be modifying your ",(0,o.jsx)(n.code,{children:"app.go"})," file."]}),"\n",(0,o.jsxs)(n.p,{children:["Import pep module by adding the following lines to the import section in ",(0,o.jsx)(n.code,{children:"app/app.go"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:'pepmodule "github.com/Fairblock/fairyring/x/pep"\npepmodulekeeper "github.com/Fairblock/fairyring/x/pep/keeper"\npepmoduletypes "github.com/Fairblock/fairyring/x/pep/types"\n'})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Add the module to ",(0,o.jsx)(n.code,{children:"ModuleBasics"})]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:"ModuleBasics = module.NewBasicManager(\n  // ... \n  pepmodule.AppModuleBasic{},\n )\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Update module account permissions"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:"maccPerms = map[string][]string{\n    // ...\n    pepmoduletypes.ModuleName:  {authtypes.Minter, authtypes.Burner, authtypes.Staking},\n }\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Add keepers to app"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:"type App struct {\n // ...\n ScopedPepKeeper      capabilitykeeper.ScopedKeeper\n\n PepKeeper     pepmodulekeeper.Keeper\n // ...\n }\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"update kv store keys"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:" keys := sdk.NewKVStoreKeys(\n    // ... \n  pepmoduletypes.StoreKey,\n )\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"configure keepers and module"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:" scopedPepKeeper := app.CapabilityKeeper.ScopeToModule(pepmoduletypes.ModuleName)\n app.PepKeeper = *pepmodulekeeper.NewKeeper(\n  appCodec,\n  keys[pepmoduletypes.StoreKey],\n  keys[pepmoduletypes.MemStoreKey],\n  app.GetSubspace(pepmoduletypes.ModuleName),\n  app.IBCKeeper.ChannelKeeper,\n  &app.IBCKeeper.PortKeeper,\n  scopedPepKeeper,\n  app.IBCKeeper.ConnectionKeeper,\n  app.BankKeeper,\n )\n pepModule := pepmodule.NewAppModule(\n  appCodec,\n  app.PepKeeper,\n  app.AccountKeeper,\n  app.BankKeeper,\n  app.MsgServiceRouter(),\n  encodingConfig.TxConfig,\n  app.SimCheck,\n )\n\n pepIBCModule := pepmodule.NewIBCModule(app.PepKeeper)\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Add IBC route"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:"ibcRouter.AddRoute(icahosttypes.SubModuleName, icaHostIBCModule).\n  AddRoute(ibctransfertypes.ModuleName, transferIBCModule).\n  AddRoute(pepmoduletypes.ModuleName, pepIBCModule)\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Add to module manager"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:"app.mm = module.NewManager(\n // ...  \n  pepModule,\n // ... \n)\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Set begin and end blockers"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:"app.mm.SetOrderBeginBlockers(\n  // ... \n  pepmoduletypes.ModuleName,\n )\n\napp.mm.SetOrderEndBlockers(\n  // ... \n  pepmoduletypes.ModuleName,\n )\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Modify genesis modules"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:"genesisModuleOrder := []string{\n  // ...  \n  pepmoduletypes.ModuleName,\n }\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Scoped keeper"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:"app.ScopedPepKeeper = scopedPepKeeper\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Init params keeper"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:"func initParamsKeeper(appCodec codec.BinaryCodec, legacyAmino *codec.LegacyAmino, key, tkey storetypes.StoreKey) paramskeeper.Keeper {\n paramsKeeper := paramskeeper.NewKeeper(appCodec, legacyAmino, key, tkey)\n\n // ... \n paramsKeeper.Subspace(pepmoduletypes.ModuleName)\n\n return paramsKeeper\n}\n"})})]})}function t(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},7214:(e,n,p)=>{p.d(n,{Z:()=>l,a:()=>i});var o=p(959);const r={},a=o.createContext(r);function i(e){const n=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(a.Provider,{value:n},e.children)}}}]);