"use strict";(self.webpackChunkfairblock_docusaurus=self.webpackChunkfairblock_docusaurus||[]).push([[7209],{194:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var t=i(1527),a=i(7214);const o={sidebar_position:3},r="Validating on Testnet",s={id:"running-a-node/validating_on_testnet",title:"Validating on Testnet",description:"Before creating a testnet validator, ensure you have first followed the instructions on running the testnet node.",source:"@site/docs/running-a-node/validating_on_testnet.md",sourceDirName:"running-a-node",slug:"/running-a-node/validating_on_testnet",permalink:"/docs/running-a-node/validating_on_testnet",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Running a Testnet",permalink:"/docs/running-a-node/run_testnet_node"},next:{title:"Submitting keyshares to fairyring",permalink:"/docs/running-a-node/submit_keyshare"}},l={},c=[{value:"Create Wallet",id:"create-wallet",level:2},{value:"Create validator command",id:"create-validator-command",level:2},{value:"Create Gentx",id:"create-gentx",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"validating-on-testnet",children:"Validating on Testnet"}),"\n",(0,t.jsxs)(n.p,{children:["Before creating a testnet validator, ensure you have first followed the instructions on ",(0,t.jsx)(n.a,{href:"/docs/running-a-node/run_testnet_node",children:"running the testnet node"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"create-wallet",children:"Create Wallet"}),"\n",(0,t.jsxs)(n.p,{children:["If you decided to participate in the validator set, you will first need a wallet added to your node.\nYou can create a wallet with following command (Replace ",(0,t.jsx)(n.code,{children:"validator"})," with a name of your choosing):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"fairyringd keys add validator\n"})}),"\n",(0,t.jsx)(n.p,{children:"Ensure you write down the mnemonic as you can not recover the wallet without it.\nTo ensure the wallet you created was saved to your node, run the following command to see if your wallet is in the list:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"fairyringd keys list\n"})}),"\n",(0,t.jsx)(n.h2,{id:"create-validator-command",children:"Create validator command"}),"\n",(0,t.jsxs)(n.p,{children:["Make sure that your wallet has enough tokens to become validator.\nYou may check your balance by the following command (Replace ",(0,t.jsx)(n.code,{children:"ADDRESS"})," with the wallet address you just created):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"fairyringd q bank balances ADDRESS\n"})}),"\n",(0,t.jsx)(n.p,{children:"Here is the command for creating a validator:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'fairyringd tx staking create-validator \\\n  --amount `10000000000ufairy` \\\n  --commission-max-change-rate 0.01 \\\n  --commission-max-rate 0.2 \\\n  --commission-rate 0.1 \\\n  --from [ACCOUNT_KEY_NAME] \\\n  --min-self-delegation 1 \\\n  --moniker [validator_moniker] \\\n  --security-contact "[optional-security@example.com]" \\\n  --website [optional.web.page.com] \\\n  --details [optional-details] \\\n  --pubkey $(fairyringd tendermint show-validator) \\\n  --chain-id fairyring-testnet-1\n'})}),"\n",(0,t.jsx)(n.p,{children:"Explanation for each of the command flags:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"amount"})," is the amount you stake in your own validator (in this example it is ",(0,t.jsx)(n.code,{children:"10000000000ufairy"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"commission-max-change-rate"}),"\xa0is how much you can increase your commission rate in a 24 hour period (in the example above, 1% per day until reaching the max rate)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"commission-max-rate"}),"\xa0is the most you are allowed to charge your delegates (in the example above, 20%)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"commission-rate"}),"\xa0is the rate you will charge your delegates (in the example above, 5%)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"from"})," is the account name of the wallet you just created"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"min-self-delegation"}),"\xa0is the lowest amount of personal funds the validator is required to have in their own validator to stay bonded (in the example above, ",(0,t.jsx)(n.code,{children:"1ufairy"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"moniker"}),"\xa0is your validator name"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"security-contact"}),"\xa0is your email address"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"website"})," is the URL of your website"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"details"})," is detail of your validator node"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"pubkey"})," is the validator public key"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"chain-id"}),"\xa0in this case is ",(0,t.jsx)(n.code,{children:"fairyring-testnet-1"}),", or whatever ",(0,t.jsx)(n.code,{children:"chain-id"})," you are working with"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"If you are joining the validator set after the genesis creation, that will be all you need to do."}),"\n",(0,t.jsx)(n.p,{children:"If you are joining the validator set before the genesis creation, here is the steps on creating the gentx:"}),"\n",(0,t.jsx)(n.h2,{id:"create-gentx",children:"Create Gentx"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Create a genesis transaction to become validator:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'fairyringd gentx \\\n  [account_key_name] \\\n  10000000000ufairy \\\n  --commission-max-change-rate 0.01 \\\n  --commission-max-rate 0.2 \\\n  --commission-rate 0.05 \\\n  --min-self-delegation 1 \\\n  --details [optional-details] \\\n  --identity [optional-identity] \\\n  --security-contact "[optional-security@example.com]" \\\n  --website [optional.web.page.com] \\\n  --moniker [node_moniker] \\\n  --chain-id fairyring-testnet-1\n'})}),"\n",(0,t.jsx)(n.p,{children:"If you would like to know the explanation on each of flags, please see the explanation above."}),"\n",(0,t.jsxs)(n.p,{children:["After running the command above, it will create a ",(0,t.jsx)(n.code,{children:"gentx-XXXXXX.json"})," file under this directory:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"$HOME/.fairyring/config/gentx/gentx-XXXXXX.json"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsxs)(n.li,{children:["Copy the contents inside ",(0,t.jsx)(n.code,{children:"$HOME/.fairyring/config/gentx/gentx-XXXXXX.json"})," to ",(0,t.jsx)(n.code,{children:"fairyring/gentxs/"})," directory (replace ",(0,t.jsx)(n.code,{children:"VALIDATOR_NAME"})," to your validator name):"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cp $HOME/.fairyring/config/gentx/gentx-*.json $HOME/fairyring/networks/testnets/fairyring-testnet-1/gentxs/gentx-VALIDATOR_NAME.json\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsxs)(n.li,{children:["Create a json file with all your node information like the example below, and name it ",(0,t.jsx)(n.code,{children:"peers-VALIDATOR_NAME.json"})," (replace ",(0,t.jsx)(n.code,{children:"VALIDATOR_NAME"})," to your validator name)"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "node_id": "YOUR_NODE_ID",\n  "public_ip": "YOUR_IP",\n  "port": "YOUR_PORT"\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["You can get your ",(0,t.jsx)(n.code,{children:"node_id"})," by the following command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"fairyringd tendermint show-node-id\n"})}),"\n",(0,t.jsxs)(n.p,{children:["You can get your ",(0,t.jsx)(n.code,{children:"public_ip"})," by the following command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl ipinfo.io/ip\n"})}),"\n",(0,t.jsxs)(n.p,{children:["For your ",(0,t.jsx)(n.code,{children:"port"}),", the default is ",(0,t.jsx)(n.code,{children:"26656"})," if you did not change the config."]}),"\n",(0,t.jsxs)(n.ol,{start:"4",children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["After creating the file, put it under ",(0,t.jsx)(n.code,{children:"$HOME/fairyring/networks/testnets/fairyring-testnet-1/peers/"})," directory"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Create a new branch with the peers & gentx files, make a commit and push the update to Github."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'git switch -c your-branch-name\ngit commit -m "commit message"\ngit push -u origin your-branch-name\n'})}),"\n",(0,t.jsxs)(n.ol,{start:"6",children:["\n",(0,t.jsxs)(n.li,{children:["Create a Pull Request to the ",(0,t.jsx)(n.code,{children:"main"})," branch on ",(0,t.jsxs)(n.a,{href:"https://github.com/Fairblock/fairyring/compare",children:[(0,t.jsx)(n.code,{children:"fairyring"})," repo"]})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsxs)(n.p,{children:["If you run into any issues, please refer to the\xa0",(0,t.jsx)(n.a,{href:"/docs/faqs/troubleshooting_fairyring",children:"troubleshooting section"})]})]})}function h(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},7214:(e,n,i)=>{i.d(n,{Z:()=>s,a:()=>r});var t=i(959);const a={},o=t.createContext(a);function r(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);